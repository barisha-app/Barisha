<!-- Ürünler Grid -->
<div class="row" id="productGrid">
    <!-- Ürünler buraya otomatik gelecek -->
</div>

<script>
// Ürünleri yükle ve göster
function loadProducts() {
    const productGrid = document.getElementById('productGrid');
    productGrid.innerHTML = '';
    
    if (products.length === 0) {
        productGrid.innerHTML = '<div class="col-12 text-center"><p>Ürün bulunamadı</p></div>';
        return;
    }
    
    products.forEach(product => {
        const col = document.createElement('div');
        col.className = 'col-md-6 col-lg-4 mb-4';
        
        col.innerHTML = `
            <div class="product-card" data-id="${product.id}" data-category="${product.category}">
                <div class="product-image">
                    <img src="${product.images[0]}" alt="${product.name}" 
                         onclick="showProductDetails(${product.id})"
                         onerror="this.src='https://via.placeholder.com/400x300/333/fff?text=Görsel+Yüklenemedi'">
                    
                    ${product.discountPercent > 0 ? `
                        <div class="discount-badge">%${product.discountPercent} İndirim</div>
                    ` : ''}
                    
                    ${product.stock < 10 ? `
                        <div class="stock-badge">Son ${product.stock} ürün</div>
                    ` : ''}
                </div>
                
                <div class="product-info">
                    <h3 class="product-title" onclick="showProductDetails(${product.id})">
                        ${product.name}
                    </h3>
                    
                    <div class="product-rating">
                        ${generateStarRating(product.rating)}
                        <span class="rating-value">${product.rating}</span>
                    </div>
                    
                    <div class="product-pricing">
                        ${product.discountPercent > 0 ? `
                            <div class="original-price">${product.originalPrice.toFixed(2)} TL</div>
                            <div class="product-price">${product.price.toFixed(2)} TL</div>
                        ` : `
                            <div class="product-price">${product.price.toFixed(2)} TL</div>
                        `}
                    </div>
                    
                    <div class="product-actions-simple">
                        <button class="btn btn-buy-now" onclick="buyNow(${product.id})">
                            <i class="bi-lightning-charge"></i> Hemen Al
                        </button>
                        <button class="btn btn-add-cart" onclick="addToCartDirectly(${product.id})">
                            <i class="bi-cart-plus"></i> Sepete Ekle
                        </button>
                    </div>
                </div>
            </div>
        `;
        
        productGrid.appendChild(col);
    });
}

// Hemen al fonksiyonu
function buyNow(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;
    
    addToCartDirectly(product);
    
    // Sepet modalını aç
    setTimeout(() => {
        const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
        cartModal.show();
    }, 500);
}

// Sepete doğrudan ekle
function addToCartDirectly(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;
    
    const variant = product.variants && product.variants.length > 0 ? 
        product.variants[0].varyant : "Standart";
    const color = product.variants && product.variants.length > 0 ? 
        product.variants[0].renk : "Siyah";
    
    addToCart(product, variant, color, 1);
    
    // Küçük bildirim
    showNotification('Ürün sepete eklendi!');
}

// Bildirim göster
function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.innerHTML = `
        <div class="notification-content">
            <i class="bi-check-circle"></i> ${message}
        </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 3000);
}
</script>
