<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>İletişim | BARISHA</title>

<link href="css/bootstrap.min.css" rel="stylesheet" />
<link href="css/bootstrap-icons.css" rel="stylesheet" />
<link href="css/tooplate-kool-form-pack.css" rel="stylesheet" />

<style>
  :root{
    --fg:#f4f7fb; --fg-dim:rgba(255,255,255,.78); --fg-muted:rgba(255,255,255,.65);
    --stroke:rgba(255,255,255,.10); --glass:rgba(20,20,20,.45); --glass-2:rgba(255,255,255,.08);
    --accent:#ffb27a;
  }
  body,.site-header,.offcanvas,.modal,.hero-section{color:var(--fg)}
  .site-brand{position:fixed;top:15px;left:20px;font-weight:800;letter-spacing:.5px;color:var(--fg);z-index:1000;text-shadow:0 2px 8px rgba(0,0,0,.55)}
  .hero-section{position:relative}
  .hero-section::before{content:"";position:absolute;inset:0;z-index:-1;background:radial-gradient(1200px 700px at 50% 10%,rgba(0,0,0,.35),rgba(0,0,0,.65))}
  .hero-section .container{position:relative;z-index:2}
  .hero-section.contact-hero{padding-top:180px!important;padding-bottom:80px}
  @media(min-width:992px){.hero-section.contact-hero{padding-top:200px!important}}

  /* Form stilleri */
  .contact-form{max-width:600px;margin:0 auto}
  .form-control,.form-select{background:var(--glass);border:1px solid var(--stroke);color:var(--fg);border-radius:12px}
  .form-control:focus,.form-select:focus{background:var(--glass);border-color:var(--accent);color:var(--fg);box-shadow:0 0 0 0.25rem rgba(255, 178, 122, 0.25)}
  .form-control::placeholder{color:var(--fg-muted)}
  .form-label{color:var(--fg);font-weight:500;margin-bottom:8px}
  
  /* Başlıklar/dosya adları net beyaz */
  h1,h2,h3,h4,h5,h6,.fw-semibold{color:#fff!important}
  h2 .bi{color:var(--accent)}
  
  /* Mesaj bildirimleri */
  .alert{backdrop-filter:blur(8px);border-radius:12px}
</style>
</head>
<body>
<div class="site-brand">BARISHA</div>

<main>
  <!-- ÜST MENÜ -->
  <header class="site-header">
    <div class="container">
      <div class="row justify-content-between">
        <div class="col-lg-12 col-12 d-flex">
          <a class="site-header-text d-flex justify-content-center align-items-center me-auto" href="index.html">
            <i class="bi-box"></i><span>BARISHA</span>
          </a>
          <ul class="social-icon d-flex justify-content-center align-items-center mx-auto">
            <span class="text-white me-4 d-none d-lg-block">Bağlantıda kalın</span>
            <li class="social-icon-item"><a href="https://www.instagram.com/barisha.tr" target="_blank" class="social-icon-link bi-instagram"></a></li>
            <li class="social-icon-item"><a href="https://twitter.com" target="_blank" class="social-icon-link bi-twitter"></a></li>
            <li class="social-icon-item"><a href="https://wa.me/905303042950" target="_blank" class="social-icon-link bi-whatsapp"></a></li>
          </ul>
          <a class="bi-list offcanvas-icon" data-bs-toggle="offcanvas" href="#offcanvasMenu"></a>
        </div>
      </div>
    </div>
  </header>

  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasMenu">
    <div class="offcanvas-header"><button type="button" class="btn-close ms-auto" data-bs-dismiss="offcanvas"></button></div>
    <div class="offcanvas-body d-flex flex-column justify-content-center align-items-center">
      <nav>
        <ul>
          <li><a href="index.html">Ana Sayfa</a></li>
          <li><a href="dosyalar.html">Dosyalarım</a></li>
          <li><a href="ziyaretdosya.html">Ziyaretçi Dosyası</a></li>
          <li><a class="active" href="contact.html">İletişim</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <!-- ANA İÇERİK -->
  <section class="hero-section hero-bg d-flex justify-content-center align-items-start contact-hero">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-4">
          <h2 class="mb-2"><i class="bi bi-envelope"></i> İletişim</h2>
          <p class="muted-sm mb-0">
            Bana ulaşmak için aşağıdaki formu doldurabilirsiniz. En kısa sürede size dönüş yapacağım.
          </p>
        </div>
      </div>

      <!-- İLETİŞİM FORMU -->
      <div class="contact-form">
        <div id="formAlert" class="alert alert-danger d-none" role="alert"></div>
        <div id="formSuccess" class="alert alert-success d-none" role="alert">
          Mesajınız başarıyla gönderildi! En kısa sürede sizinle iletişime geçeceğim.
        </div>
        
        <form id="contactForm">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="name" class="form-label">Adınız Soyadınız</label>
              <input type="text" class="form-control" id="name" name="name" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="email" class="form-label">E-posta Adresiniz</label>
              <input type="email" class="form-control" id="email" name="email" required>
            </div>
          </div>
          <div class="mb-3">
            <label for="subject" class="form-label">Konu</label>
            <input type="text" class="form-control" id="subject" name="subject" required>
          </div>
          <div class="mb-3">
            <label for="message" class="form-label">Mesajınız</label>
            <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
          </div>
          <div class="text-center">
            <button type="submit" class="btn btn-light pill px-4">
              <i class="bi-send me-2"></i> Gönder
            </button>
          </div>
        </form>
      </div>

      <div class="mt-4 text-center">
        <a class="custom-btn btn mt-2" href="index.html">⬅️ Ana Sayfa</a>
      </div>
    </div>
  </section>
</main>

<script src="js/bootstrap.bundle.min.js"></script>
<script>
// İletişim formu işleme
document.getElementById('contactForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  const form = e.target;
  const formData = new FormData(form);
  const submitBtn = form.querySelector('button[type="submit"]');
  const alertEl = document.getElementById('formAlert');
  const successEl = document.getElementById('formSuccess');
  
  // Önceki mesajları temizle
  alertEl.classList.add('d-none');
  successEl.classList.add('d-none');
  
  // Butonu devre dışı bırak ve yükleniyor durumuna getir
  const originalText = submitBtn.innerHTML;
  submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span> Gönderiliyor...';
  submitBtn.disabled = true;
  
  try {
    const response = await fetch('https://barisha.vercel.app/api/contact', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(Object.fromEntries(formData)),
    });
    
    const result = await response.json();
    
    if (response.ok) {
      // Başarılı gönderim
      successEl.classList.remove('d-none');
      form.reset();
    } else {
      // Hata durumu
      alertEl.textContent = result.message || 'Bir hata oluştu. Lütfen daha sonra tekrar deneyin.';
      alertEl.classList.remove('d-none');
    }
  } catch (error) {
    console.error('Hata:', error);
    alertEl.textContent = 'Bir hata oluştu. Lütfen daha sonra tekrar deneyin.';
    alertEl.classList.remove('d-none');
  } finally {
    // Butonu eski haline getir
    submitBtn.innerHTML = originalText;
    submitBtn.disabled = false;
  }
});
</script>
</body>
</html>
